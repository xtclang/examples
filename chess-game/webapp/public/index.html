<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chess Playground</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./static/styles.css" />
</head>
<body class="mode-single">
  <!-- Mode Switch Tabs -->
  <nav class="mode-tabs">
    <button class="mode-tab active" id="singlePlayerBtn" data-mode="single">
      <span class="tab-icon">ðŸ¤–</span>
      <span class="tab-label">vs AI</span>
    </button>
    <button class="mode-tab" id="multiplayerBtn" data-mode="multi">
      <span class="tab-icon">ðŸ‘¥</span>
      <span class="tab-label">Online</span>
    </button>
  </nav>

  <!-- Main Game Area -->
  <main class="game-container">
    <!-- Status Bar -->
    <div class="status-bar">
      <span class="status-item">
        <span class="status-dot"></span>
        <span id="turn">White</span>'s turn
      </span>
      <span class="status-divider">â€¢</span>
      <span class="status-item" id="status">Ongoing</span>
    </div>

    <!-- Chess Board -->
    <div class="board-wrapper">
      <div id="board" class="board"></div>
    </div>

    <!-- Action Toolbar -->
    <div class="toolbar">
      <div class="toolbar-group">
        <button class="tool-btn" id="reset" title="Reset Game">
          <span class="tool-icon">â†º</span>
          <span class="tool-text">Reset</span>
        </button>
        <button class="tool-btn" id="refresh" title="Refresh State">
          <span class="tool-icon">âŸ³</span>
          <span class="tool-text">Sync</span>
        </button>
      </div>

      <div class="toolbar-group scores">
        <div class="score-display single-player-only">
          <span class="score-label">You</span>
          <span class="score-value" id="playerScoreInline">0</span>
        </div>
        <div class="score-display single-player-only">
          <span class="score-label">AI</span>
          <span class="score-value" id="opponentScoreInline">0</span>
        </div>
        <div class="score-display multiplayer-only">
          <span class="score-label">â™”</span>
          <span class="score-value" id="playerScoreInlineMulti">0</span>
        </div>
        <div class="score-display multiplayer-only">
          <span class="score-label">â™š</span>
          <span class="score-value" id="opponentScoreInlineMulti">0</span>
        </div>
      </div>

      <div class="toolbar-group">
        <button class="tool-btn" id="infoToggle" title="Game Info">
          <span class="tool-icon">â„¹</span>
        </button>
        <button class="tool-btn multiplayer-only" id="chatToggleBtn" title="Chat">
          <span class="tool-icon">ðŸ’¬</span>
          <span class="badge" id="chatBadge">0</span>
        </button>
      </div>
    </div>
  </main>

  <!-- Online Panel (Slide-in from right) -->
  <aside class="slide-panel" id="onlinePanel">
    <div class="panel-header">
      <h2>Online Play</h2>
      <button class="close-btn" id="closeOnlinePanel">Ã—</button>
    </div>
    <div class="panel-body">
      <!-- Lobby Options -->
      <div id="lobbyOptions">
        <p class="panel-hint">Create a room or join with a code</p>
        <button class="btn-primary full-width" id="createRoomBtn">Create Room</button>
        <div class="divider"><span>or</span></div>
        <div class="input-group">
          <input type="text" class="text-input" id="roomCodeInput" placeholder="Enter code" maxlength="6" />
          <button class="btn-secondary" id="joinRoomBtn">Join</button>
        </div>
      </div>

      <!-- Room Info (shown when in room) -->
      <div id="roomInfo" class="hidden">
        <div class="room-code-box">
          <span class="room-code-label">Room Code</span>
          <span class="room-code" id="roomCodeDisplay">------</span>
          <span class="room-code-hint">Share with your opponent</span>
        </div>
        <div class="player-info">
          <span class="player-label">Playing as</span>
          <span class="player-color-badge" id="playerColorDisplay">
            <span class="piece">â™”</span> White
          </span>
        </div>
        <div class="game-status-box">
          <span class="status-indicator" id="mpStatusPill">Waiting for opponent...</span>
        </div>
        <button class="btn-danger full-width" id="leaveRoom">Leave Room</button>
      </div>
    </div>
  </aside>

  <!-- Chat Drawer (Slide-in from right) -->
  <aside class="slide-panel chat-drawer" id="chatPanel">
    <div class="panel-header">
      <h2>ðŸ’¬ Game Chat</h2>
      <button class="close-btn" id="closeChatPanel">Ã—</button>
    </div>
    <div class="chat-body" id="chatBody">
      <div class="chat-messages" id="chatMessages">
        <div class="chat-empty">No messages yet. Start the conversation!</div>
      </div>
      <div class="chat-input-row">
        <input type="text" class="chat-input" id="chatInput" placeholder="Type a message..." maxlength="500" />
        <button class="chat-send" id="chatSendBtn">Send</button>
      </div>
    </div>
  </aside>

  <!-- Info Popover -->
  <div class="popover" id="infoPopover">
    <div class="popover-arrow"></div>
    <div class="popover-content">
      <div class="info-row">
        <span class="info-label">Selection</span>
        <span class="info-value" id="selection">Pick a piece</span>
      </div>
      <div class="info-row">
        <span class="info-label">Log</span>
      </div>
      <div class="log-box" id="log">Waiting for serverâ€¦</div>
      <div class="info-row scores-detail">
        <div class="score-card">
          <span class="card-label single-player-only">Your Score</span>
          <span class="card-label multiplayer-only">White</span>
          <span class="card-value" id="playerScore">0</span>
        </div>
        <div class="score-card">
          <span class="card-label single-player-only">Opponent</span>
          <span class="card-label multiplayer-only">Black</span>
          <span class="card-value" id="opponentScore">0</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Backdrop for panels -->
  <div class="backdrop" id="backdrop"></div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="./static/app.js" defer></script>
</body>
</html>
